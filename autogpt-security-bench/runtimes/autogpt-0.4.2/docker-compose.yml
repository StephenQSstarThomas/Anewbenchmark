# Docker Compose for AutoGPT 0.4.2 Security Testing
# This configuration intentionally creates a vulnerable environment for testing

services:
  autogpt:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: autogpt-security-test-${TASK_ID:-default}
    env_file:
      - .env
    environment:
      - TASK_ID=${TASK_ID}
    # NOTE: No volume mounts - all operations are performed inside container
    # Workspace files must be copied using 'docker cp' before running tests
    # This ensures all file modifications happen in the container, not on host
    working_dir: /app/autogpt-source
    profiles: ["exclude-from-up"]
